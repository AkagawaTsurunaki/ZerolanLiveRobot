# Zerolan Live Robot

![Static Badge](https://img.shields.io/badge/Python%20-%203.10%20-%20blue) ![Static Badge](https://img.shields.io/badge/License-MIT-orange) ![Static Badge](https://img.shields.io/badge/AI%20VTuber-blue) ![Static Badge](https://img.shields.io/badge/Bilibli-fb7299) ![Static Badge](https://img.shields.io/badge/Youtube-ff0000) ![Static Badge](https://img.shields.io/badge/Twitch-9044fe) ![Static Badge](https://img.shields.io/badge/ASR-purple) ![Static Badge](https://img.shields.io/badge/LLM-purple) ![Static Badge](https://img.shields.io/badge/TTS-purple) ![Static Badge](https://img.shields.io/badge/OCR-purple) ![Static Badge](https://img.shields.io/badge/ImageCaptioning-purple) ![Static Badge](https://img.shields.io/badge/VideoCaptioning-purple) ![Static Badge](https://img.shields.io/badge/MinecraftAIAgent-purple) ![Static Badge](https://img.shields.io/badge/ver-2.1.2-green)

ä½ æˆ–è®¸å·²ç»å¬è¯´è¿‡è‘—åçš„ [Neurosama](https://virtualyoutuber.fandom.com/wiki/Neuro-sama)ï¼Œæˆ–è€…æ˜¯æ¥è‡ªä¸­å›½çš„[æœ¨å‡ èŒ](https://mobile.moegirl.org.cn/%E6%9C%A8%E5%87%A0%E8%90%8C)ã€‚ä½ æ˜¯å¦ä¹Ÿæƒ³è¦æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„ AI è™šæ‹Ÿå½¢è±¡é™ªä½ ç›´æ’­ã€èŠå¤©ã€æ‰“æ¸¸æˆï¼Ÿå¼€æºçš„ Zerolan Live Robot æ­£è‡´åŠ›äºå®ç°æ‚¨çš„æ¢¦æƒ³ï¼è€Œè¿™ä»…ä»…éœ€è¦ä¸€å¼ æ¶ˆè´¹çº§æ˜¾å¡ï¼

Zerolan Live Robot æ˜¯ä¸€æ¬¾å¤šåŠŸèƒ½çš„ç›´æ’­æœºå™¨äººï¼ˆAI VTuberï¼‰ï¼Œå®ƒå¯ä»¥å¬æ‡‚ä½ æ‰€è¯´çš„è¯ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨åœ¨ç›´æ’­é—´ä¸­è¯»å–å¼¹å¹•ï¼Œè§‚å¯Ÿç”µè„‘å±å¹•çš„æŒ‡å®šçª—å£ï¼Œç†è§£å…¶ç”»é¢å†…å®¹å’Œæ–‡å­—ä¿¡æ¯ï¼Œæ“çºµ Minecraft ä¸­çš„æ¸¸æˆè§’è‰²ï¼Œåšå‡ºå¸¦æƒ…æ„Ÿçš„è¯­éŸ³èŠå¤©å›åº”ã€‚

ç›¸å…³é¡¹ç›®ï¼š[KonekoMinecraftBot](https://github.com/AkagawaTsurunaki/KonekoMinecraftBot)ã€[ZerolanCore](https://github.com/AkagawaTsurunaki/zerolan-core)ã€[ZerolanData](https://github.com/AkagawaTsurunaki/zerolan-data)ã€[ZerolanPlayground](https://github.com/AkagawaTsurunaki/ZerolanPlayground)ã€‚

æœ¬é¡¹ç›®æŒç»­å¼€å‘ä¸­ï¼Œå½“å‰çš„ç‰ˆæœ¬ä¸º `2.1.2`ï¼Œæ‚¨å¯ä»¥å…³æ³¨å¼€å‘è€…çš„ Bilibili è´¦å·[èµ¤å·é¹¤é¸£_Channel](https://space.bilibili.com/1076299680)ï¼Œæ­£åœ¨æ ¹æ®æ­¤é¡¹ç›®è°ƒæ•™ AI çŒ«å¨˜ï¼Œä¸å®šæ—¶ç›´æ’­å±•ç¤ºæœ€æ–°è¿›å±•ã€‚

## ç‰¹ç‚¹ä¸åŠŸèƒ½

- [x] ğŸ’­ åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„è‡ªç„¶è¯­è¨€å¯¹è¯ï¼Œä¸Šä¸‹æ–‡ç†è§£å’ŒäººæœºèŠå¤©
- [x] ğŸ» è¿æ¥è‡³ Bilibiliã€YouTubeï¼ˆå®éªŒï¼‰ã€Twitchï¼ˆå®éªŒï¼‰ç›´æ’­é—´ï¼Œæ ¹æ®å¼¹å¹•å†…å®¹æŒ‘é€‰å¹¶å›å¤
- [x] ğŸ™ï¸ è¯†åˆ«ç”¨æˆ·éº¦å…‹é£è¯­éŸ³è¾“å…¥å†…å®¹ï¼Œç†è§£å¹¶å›å¤ï¼ˆä¾‹å¦‚ï¼š`ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ`ã€`è¯·å…³é—­éº¦å…‹é£ï¼`ï¼‰
- [x] ğŸ“£ æ ¹æ®å›å¤æ–‡æœ¬çš„å¸¦æƒ…æ„Ÿçš„è¯­éŸ³åˆæˆ
- [x] ğŸ“„ è¯†åˆ«æŒ‡å®šçª—å£ä¸­çš„æ–‡å­—å†…å®¹ï¼Œå¹¶åˆ†æå…¶ä¸­çš„æ–‡å­—ï¼ˆä¾‹å¦‚ï¼š`èƒ½çœ‹è§è¿™é‡Œå†™äº†ä»€ä¹ˆå—ï¼Ÿ`ï¼‰
- [x] ğŸ–¼ï¸ è¯†åˆ«æŒ‡å®šçª—å£ä¸­çš„å›¾åƒå†…å®¹ï¼Œå¹¶ç†è§£å…¶ä¸­çš„å«ä¹‰ï¼ˆä¾‹å¦‚ï¼š`ä½ çœ‹è§äº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ`ï¼‰
- [x] ğŸ”ï¸ æ‰“å¼€ã€æ§åˆ¶æµè§ˆå™¨å¹¶æ‰§è¡Œç™¾ç§‘æœç´¢ï¼ˆä¾‹å¦‚ï¼š`æœç´¢ä¸€ä¸‹ä»€ä¹ˆæ˜¯äºŒæ¬¡å…ƒã€‚`ï¼‰
- [x] ğŸ–±ï¸ è¯­éŸ³æŒ‡ä»¤æ§åˆ¶é¼ æ ‡ç‚¹å‡» UI ç•Œé¢ï¼ˆä¾‹å¦‚ï¼š`ç‚¹å‡»å±å¹•ä¸Šçš„æœç´¢æŒ‰é’®`ï¼‰
- [x] ğŸ› ï¸ æ ¹æ®ä¸Šä¸‹æ–‡è¯­å¢ƒé‡‡å–è¡ŒåŠ¨æˆ–æŒ‘é€‰å·¥å…·ï¼ˆä¾‹å¦‚ï¼š`å¥½äº†ï¼Œä½ å¯ä»¥å…³æœºäº†ï¼`ã€`è¯·å…³é—­æµè§ˆå™¨`ï¼‰
- [x] ğŸ®ï¸ è¯­éŸ³æŒ‡ä»¤å¯æ§åˆ¶çš„ Minecraft AI æ™ºèƒ½ä½“ï¼ˆä¾‹å¦‚ï¼š`åœ¨æ¸¸æˆä¸­è·Ÿå¤§å®¶è¯´ä½ å¥½ï¼`ï¼‰
- [x] ğŸ““ åŸºäºæœ€å¤§è®°å½•æ¡æ•°çš„ç®€å•çš„è¿è¡Œæ—¶ä¸Šä¸‹æ–‡çŸ­æœŸè®°å¿†
- [x] ğŸ“– åŸºäº å‘é‡æ•°æ®åº“çš„é•¿æœŸè®°å¿†å­˜å‚¨ä¸æå–ï¼ˆä¾‹å¦‚ï¼š`ä½ è¿˜è®°å¾—æˆ‘è¯´è¿‡æ˜¥æ—¥å½±æ˜¯ä»€ä¹ˆå˜›ï¼Ÿ`ï¼‰
- [x] ğŸï¸ OBS ç›´æ’­æµå¼æ‰“å­—æœºå­—å¹•æ˜¾ç¤ºä¸æ§åˆ¶
- [x] âš™ï¸ ç³»ç»Ÿé…ç½®å’Œå®æ—¶æ§åˆ¶å™¨çš„ WebUI ç•Œé¢
- [x] ğŸ¥³ Live2D å½¢è±¡æ§åˆ¶ï¼Œå˜´å‹åŒæ­¥ã€è‡ªåŠ¨çœ¨çœ¼å’Œè‡ªä¸»å‘¼å¸
- [x] åŸºäº Unity çš„ Live2D å½¢è±¡æ§åˆ¶å’Œ 3D æ¨¡å‹æ§åˆ¶çš„å±•ç¤ºåº”ç”¨

## å®‰è£…å¹¶è¿è¡Œ

> [!CAUTION]
>
> Zerolan Live Robot 2.x ç‰ˆæœ¬ä¸æ—§ç‰ˆæœ¬ 1.x ä¸å…¼å®¹ï¼Œå› æ­¤æ‚¨å¯èƒ½éœ€è¦é‡æ–°é…ç½®ç¯å¢ƒã€å®‰è£…ä¾èµ–ã€‚

Zerolan Project ç”± [ZerolanLiveRobot](https://github.com/AkagawaTsurunaki/ZerolanLiveRobot)ã€[ZerolanCore](https://github.com/AkagawaTsurunaki/zerolan-core)ã€[ZerolanData](https://github.com/AkagawaTsurunaki/zerolan-data)ã€[ZerolanPlayground](https://github.com/AkagawaTsurunaki/ZerolanPlayground)ã€[KonekoMinecraftBot](https://github.com/AkagawaTsurunaki/KonekoMinecraftBot) ç­‰é¡¹ç›®å…±åŒç»„æˆã€‚ä¸‹è¡¨ç®€è¦åœ°ä»‹ç»äº†å„ä¸ªé¡¹ç›®çš„ç”¨é€”ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨ï¼š

| é¡¹ç›®å                                                       | ç”¨é€”                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| [ZerolanLiveRobot](https://github.com/AkagawaTsurunaki/ZerolanLiveRobot) | ç›´æ’­æœºå™¨äººçš„æ§åˆ¶æ¡†æ¶ï¼Œé€šè¿‡é‡‡é›†å„ç±»æ•°æ®ï¼Œå¹¶ç»¼åˆåˆ†æåšå‡ºåŠ¨ä½œå“åº”ã€‚ |
| [ZerolanCore](https://github.com/AkagawaTsurunaki/zerolan-core) | ä¸ºç›´æ’­æœºå™¨äººæä¾› AI æ¨ç†æœåŠ¡çš„æ ¸å¿ƒæ¨¡å—ï¼Œä¾‹å¦‚å¤§è¯­è¨€æ¨¡å‹ã€è¯­éŸ³è¯†åˆ«ã€è¯­éŸ³åˆæˆç­‰ Web API æœåŠ¡ã€‚ |
| [ZerolanData](https://github.com/AkagawaTsurunaki/zerolan-data) | å®šä¹‰äº†å„ä¸ªé¡¹ç›®æˆ–æœåŠ¡ä¹‹é—´æ²Ÿé€šä¸äº¤æ¢çš„æ•°æ®æ ¼å¼ã€‚               |
| [ZerolanPlayground](https://github.com/AkagawaTsurunaki/ZerolanPlayground)                                        | ä½¿ç”¨ Unity å¼•æ“å’Œ Vuforia å¼•æ“å¼€å‘çš„ AR è™šæ‹Ÿå½¢è±¡å±•ç¤ºå™¨ï¼Œå…¼å®¹ Live2D æ¨¡å‹çš„å±•ç¤ºã€‚|
| [KonekoMinecraftBot](https://github.com/AkagawaTsurunaki/KonekoMinecraftBot) | åŸºäº mineflayer çš„ Minecraft æ™ºèƒ½ä½“ï¼Œä½¿ç”¨æœ‰é™çŠ¶æ€æœºæ§åˆ¶è¡Œä¸ºï¼ˆæ‰“æ€ªã€ç æ ‘ã€ç¡è§‰ç­‰ï¼‰ï¼Œæ”¯æŒè¯­éŸ³æ§åˆ¶ã€‚ |

### éƒ¨ç½²æ ¸å¿ƒæœåŠ¡

å¦‚æœä½ å¸Œæœ›å°† AI æ¨¡å‹æœåŠ¡éƒ¨ç½²åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œè¯·ç§»æ­¥è‡³[æ­¤å¤„](https://github.com/AkagawaTsurunaki/zerolan-core)è¿›å®Œæˆ ZerolanCore çš„ç›¸å…³éƒ¨ç½²å·¥ä½œã€‚

æœ¬é¡¹ç›®æä¾›äº†ä¸€äº›ç¬¬ä¸‰æ–¹æä¾›çš„ API æ¥å£çš„æ”¯æŒï¼Œä½†å¦‚æœå…¶ä¸­æ²¡æœ‰ä½ æƒ³è¦çš„ï¼Œè¯·æ ¹æ®æ–‡æ¡£å®ç°è‡ªå·±çš„ç»Ÿä¸€æ¨¡å‹ç®¡çº¿ï¼ˆUnified Model Pipeline, UMPï¼‰ã€‚

å½“ç„¶ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚æ··åˆä½¿ç”¨ç¬¬ä¸‰æ–¹æ¥å£å’Œ ZerolanCore æœåŠ¡ï¼Œåç»­æ‚¨å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ã€‚

æ— è®ºå¦‚ä½•ï¼Œä½ å¿…é¡»è‡³å°‘é…ç½®**å¤§è¯­è¨€æ¨¡å‹**æ‰èƒ½é©±åŠ¨æ•´ä¸ªé¡¹ç›®ï¼Œå®ƒæ˜¯é©±åŠ¨æœ¬é¡¹ç›®çš„æ ¸å¿ƒã€‚

### å®‰è£…æœ¬é¡¹ç›®ä¾èµ–

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Windows æ“ä½œç³»ç»Ÿï¼Œä¸”æ­£åœ¨ä½¿ç”¨è¾ƒé«˜ç‰ˆæœ¬çš„ Pythonï¼Œè¯·æ£€æŸ¥æ‚¨æ˜¯å¦å·²ç»å®‰è£…äº† [Visual C++ Build Tools](https://visualstudio.microsoft.com/zh-hans/visual-cpp-build-tools/)ï¼Œéƒ¨åˆ† Python ä¾èµ–çš„åº“å¯èƒ½ä¼šéœ€è¦åœ¨æ‚¨çš„æ“ä½œç³»ç»Ÿä¸Šç¼–è¯‘åå®‰è£…ã€‚å½“ç„¶ï¼Œæ›´æ¨èæ‚¨ä½¿ç”¨è¾ƒä½ç‰ˆæœ¬çš„ Pythonï¼Œä¾‹å¦‚ `3.10` å’Œ `3.11`ã€‚

è¿è¡ŒæŒ‡ä»¤ï¼Œè¿™ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒå¹¶æ¿€æ´»ï¼Œç„¶åè‡ªåŠ¨å®‰è£…æœ¬é¡¹ç›®éœ€è¦çš„ä¾èµ–åŒ…ï¼š

```shell
conda create --name ZerolanLiveRobot python=3.11
conda activate ZerolanLiveRobot
pip install -r requirements.txt
```

### é…ç½®å¹¶å¯åŠ¨æœ¬é¡¹ç›®

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œ Zerolan Live Robot çš„ä¸»ç¨‹åºï¼š

```shell
python main.py
```

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨æœ¬é¡¹ç›®ï¼Œä¸»ç¨‹åºå°†ä¸ºæ‚¨è‡ªåŠ¨ç”Ÿæˆä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œä½ç½®åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸‹çš„ `./resources/config.yaml`ï¼Œæœ€åä¼šè‡ªåŠ¨é€€å‡ºï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚

è¿™æ ·ï¼Œä½ æœ‰ä¸¤ç§æ–¹å¼ä¿®æ”¹ä½ çš„é…ç½®æ–‡ä»¶ï¼š

1. WebUIé…ç½®ï¼šè¿è¡Œ `python webui.py` å°†ä¼šå¯åŠ¨ä¸€ä¸ª WebUI çš„é…ç½®ç•Œé¢ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®å®ƒï¼ˆé€šå¸¸æ˜¯`http://127.0.0.1:7860`ï¼‰ï¼Œç„¶åæ ¹æ®é…ç½®é¡¹ä¸­çš„æè¿°å’Œæç¤ºè¿›è¡Œå¡«å†™ï¼Œå¡«å†™å®Œæ¯•åï¼Œå¯ä»¥å•å‡»å³ä¸Šè§’çš„ Save Config æŒ‰é’®ï¼Œè¿™å°†ä¿å­˜é…ç½®åˆ° `./resources/config.yaml`ã€‚
2. æ‰‹åŠ¨ä¿®æ”¹ï¼šç›´æ¥æ‰¾åˆ° `./resources/config.yaml` æ–‡ä»¶å¹¶æŒ‰ç…§æ–‡ä»¶å†…çš„æ³¨é‡Šå¼•å¯¼å¡«å†™å¯¹åº”çš„é…ç½®ã€‚

è‹¥åœ¨æ­¤æœŸé—´å‡ºç°ä»»ä½•æŠ¥é”™æˆ–é—®é¢˜ï¼Œéƒ½å¯ä»¥é€šè¿‡æ–°å»º Issue è·å–å¸®åŠ©ï¼Œå±Šæ—¶è¿˜æ³è¯·æ‚¨æä¾›å®Œæ•´çš„æ—¥å¿—å’Œå¤ç°æµç¨‹ã€‚

### * Minecraft æ”¯æŒ

> [!NOTE]
> 
> æ­¤æ­¥éª¤æ˜¯**å¯é€‰**çš„ã€‚

æœ¬é¡¹ç›®ä¸ [KonekoMinecraftBot](https://github.com/AkagawaTsurunaki/KonekoMinecraftBot) å…±åŒå®ç°äº†ä¸€å¥— ZerolanProtocol åè®®æ¥å£ï¼Œå¯ä»¥ä»æœ¬é¡¹ç›®æ§åˆ¶åœ¨ Minecraft æ¸¸æˆä¸­çš„æœºå™¨äººã€‚å¦‚æœ‰éœ€è¦è¯·ç§»æ­¥è‡³[æ­¤å¤„](https://github.com/AkagawaTsurunaki/KonekoMinecraftBot)æŸ¥çœ‹è¯¦ç»†ã€‚

###  * Zerolan Playground

> [!NOTE]
> 
> æ­¤æ­¥éª¤æ˜¯**å¯é€‰**çš„ã€‚å› ä¸ºæœ¬é¡¹ç›®å·²ç»æ”¯æŒäº† Live2D çš„å±•ç¤ºåŠŸèƒ½ï¼Œå¦‚æœä½ éœ€è¦ AR ç­‰åŸºäº Unity å’Œ Vuforia çš„åŠŸèƒ½è¯·ç»§ç»­å‘ä¸‹é˜…è§ˆã€‚

ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…è¿›è¡Œå®‰è£…ï¼Œç„¶ååœ¨å³ä¸Šè§’å¡«å†™ä½ å¼€å¯æœ¬ ZerolanLiveRobot çš„æœåŠ¡å™¨åœ°å€ã€‚

ä¾‹å¦‚ï¼Œä½ å°† ZerolanLiveRobot ä¸»ç¨‹åºå¼€å¯åœ¨ä½ çš„ç”µè„‘çš„ 11013 ç«¯å£ï¼Œä¸”ä½ çš„ç”µè„‘ IP ä¸º `192.168.1.114`ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨åœ°å€ä¸€æ å¡«å†™ `ws://192.168.1.114:11013`ï¼Œæœ€åå•å‡»â€œè¿æ¥â€å³å¯ã€‚


## è‡ªå®šä¹‰è®¾è®¡æœºå™¨äºº

æœ¬é¡¹ç›®ä¹Ÿæä¾›äº†ä¸€ç§åŸºäº**äº‹ä»¶é©±åŠ¨**è®¾è®¡æ¨¡å¼çš„æœºå™¨äººå¼€å‘æ¡†æ¶ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯ `TypedEventEmitter`ã€‚

### TypedEventEmitter

åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæœºå™¨äººæ˜¯åœ¨ä¸€ç³»åˆ—äº‹ä»¶çš„å‘é€å’Œå¤„ç†è¿‡ç¨‹ä¸­è¿è¡Œçš„ã€‚æ¢å¥è¯è¯´ï¼Œæ²¡æœ‰äº‹ä»¶å‘ç”Ÿï¼Œæœºå™¨äººå°±ä¸ä¼šæœ‰ä»»ä½•å›åº”ã€‚

æ¯ä¸€ä¸ªäº‹ä»¶ `Event` éƒ½ç»§æ‰¿è‡ª `BaseEvent`ï¼Œå¹¶å«æœ‰ä¸€ä¸ª `type` å­—æ®µï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ç”¨ä»¥æ ‡è®°è¿™ä¸ªäº‹ä»¶çš„ç±»å‹ã€‚æœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„æ‰€æœ‰äº‹ä»¶ç±»å‹çš„éƒ½å®šä¹‰åœ¨ `event.registry` ä¸­ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‹“å±•æ·»åŠ è‡ªå·±çš„äº‹ä»¶åï¼Œå¹¶å®ç°ä¸€ä¸ªç»§æ‰¿è‡ª `BaseEvent` çš„è‡ªå®šä¹‰äº‹ä»¶ ã€‚

`emitter` æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œç”¨ä»¥å¤„ç†äº‹ä»¶å‘é€å’Œç›‘å¬å™¨çš„æ‰§è¡Œã€‚

ä½¿ç”¨è£…é¥°å™¨ `@emitter.on(event_key)` å¯ä»¥å¿«æ·åœ°æ³¨å†ŒæŸä¸ªç›‘å¬å™¨ã€‚å½“ç›‘å¬å™¨æ˜¯å¼‚æ­¥å‡½æ•°æ—¶ï¼Œä¼šåœ¨è§¦å‘äº‹ä»¶æ—¶ä»¥å¼‚æ­¥åç¨‹ä»»åŠ¡çš„å½¢å¼æ‰§è¡Œï¼›å½“ç›‘å¬å™¨æ˜¯åŒæ­¥å‡½æ•°æ—¶ï¼Œä¼šåœ¨è§¦å‘äº‹ä»¶æ—¶å°†åœ¨ä¸€ä¸ªé»˜è®¤ 4 ä¸ª worker çš„çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚

> [!Caution]
>
> ç”±äº `emitter` å¼€å¯çš„äº‹ä»¶å¾ªç¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œå› æ­¤**ä¸è¦ä½¿ç”¨ä»»ä½•å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹çš„æ–¹æ³•æˆ–å‡½æ•°**ï¼Œé™¤éä½ çŸ¥é“ä½ åœ¨åšä»€ä¹ˆã€‚ã€
>
> åŒæ­¥ç›‘å¬å™¨è¿è¡Œåœ¨çº¿ç¨‹æ± ä¸Šï¼Œè¯·æ³¨æ„**çº¿ç¨‹å®‰å…¨**é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªè¡Œè°ƒæ•´ worker çš„æ•°é‡ã€‚

å½“æˆ‘ä»¬éœ€è¦å‘é€äº‹ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `emitter.emit(event)`ï¼Œå…¶ä¸­ `event` å°±æ˜¯ä¸€ä¸ª `BaseEvent` äº‹ä»¶å¯¹è±¡ã€‚

ä¾‹å¦‚ï¼Œå½“ç³»ç»Ÿæ£€æµ‹åˆ°ä¸€æ®µäººå£°éŸ³é¢‘æ—¶ï¼Œå°†ä¼šå‘é€ `SpeechEvent` äº‹ä»¶ï¼ˆå…¶ `event_key` ä¸º `EventKeyRegistry.Device.SERVICE_VAD_SPEECH_CHUNK` æ‰€ä»£è¡¨çš„å­—ç¬¦ä¸²ï¼‰ï¼Œå¹¶è°ƒç”¨æ‰€æœ‰æ³¨å†Œè¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å™¨ï¼Œè¿›è¡ŒæŸç§å¤„ç†ï¼š

```python
@emitter.on(EventKeyRegistry.Device.MICROPHONE_VAD)
async def on_service_vad_speech_chunk(event: SpeechEvent):
    speech, channels, sample_rate = event.speech, event.channels, event.sample_rate
    prediction = await asr.predict(...)  # å‡å¦‚è°ƒç”¨äº†æŸä¸ªå‡½æ•°è·å¾—äº† ASR çš„ç»“æœ
    emitter.emit(ASREvent(prediction=prediction))  # å‘é€è‡ªåŠ¨è¯­éŸ³è¯†åˆ«äº‹ä»¶
```

è¿™é‡Œçš„ç›‘å¬å™¨å³ `on_service_vad_speech_chunk`ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨ `SpeechEvent` å‘ç”Ÿæ—¶è¢«è°ƒç”¨ã€‚

### Pipeline

ç®¡çº¿ï¼ˆPipelineï¼‰æ˜¯æ²Ÿé€š Zerolan Core çš„é‡è¦å®ç°ï¼Œå®ƒæ˜¯åŸºäº HTTP å¼€å‘çš„ã€‚ç®¡çº¿çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯ç”¨çš„ç®¡çº¿å¯¹è±¡ã€‚ç„¶åè°ƒç”¨ç®¡çº¿å¯¹è±¡ä¸­çš„ `predict` æˆ– `stream_predict` æ–¹æ³•å³å¯ä½¿ç”¨ Zerolan Core ä¸­çš„ AI æ¨¡å‹ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬ä¸€äº›ç¬¬ä¸‰æ–¹çš„ APIã€‚

ä»¥å¤§è¯­è¨€æ¨¡å‹ä¸ºä¾‹ï¼ŒæŒ‡å®šç›®æ ‡æœåŠ¡å™¨çš„åœ°å€ï¼ˆä½ çš„ Zerolan Core æœåŠ¡å¼€å¯çš„åœ°å€ï¼‰ï¼Œä¼ å…¥ `LLMPipelineConfig` å¯¹è±¡åˆ° `LLMPipeline`ï¼Œå³å¯å»ºç«‹ç®¡çº¿ã€‚

```python
config = LLMPipelineConfig(predict_url="http://127.0.0.1:11000/llm/predict")
llm = LLMPipeline(config)
query = LLMQuery(text="ä½ å¥½ï¼Œä½ å«ä»€ä¹ˆåå­—ï¼Ÿ", history=[])
prediction = llm.predict(query)
print(prediction.response)
# è¿™æ ·å°±åº”è¯¥å¯ä»¥å¾—åˆ°æ¨¡å‹çš„å›å¤
```

å¦‚æœä½ æƒ³çŸ¥é“æ›´å¤šå®ç°ç»†èŠ‚ï¼Œå¯ä»¥æŸ¥çœ‹ [ZerolanData](https://github.com/AkagawaTsurunaki/zerolan-data) ä¸­çš„æ•°æ®å®šä¹‰ï¼Œå¯èƒ½ä¹Ÿéœ€è¦ç»“åˆç®¡çº¿çš„å®ç°å’Œ [ZerolanCore](https://github.com/AkagawaTsurunaki/zerolan-core) ä¸­ `app.py` æ–‡ä»¶ä¸­çš„å†…å®¹è¿›è¡Œç†è§£ã€‚

### Services

### services.browser

åŸºäº Selenium çš„ç®€å•çš„æµè§ˆå™¨æ§åˆ¶å™¨ã€‚ä»…æ”¯æŒ `Firefox`ã€‚
åŠŸèƒ½å¾ˆç®€å•ï¼Œå¦‚æœéœ€è¦æ‰©å±•éœ€è¦è‡ªå·±å®ç°ã€‚å…¶ä¸­æœºå™¨äººå¯èƒ½ä¼šä½¿ç”¨ ShowUI çš„æ¨¡å‹æ¨ç†ç»“æœæ¥è°ƒç”¨å¹¶æ§åˆ¶æµè§ˆå™¨ã€‚

### services.game

ç”¨äºä¸å…¶å®ƒæ¸¸æˆè¿›è¡Œè¿æ¥å’Œæ¸¸ç©çš„æ§åˆ¶å™¨ã€‚ç›®å‰ä»…æ”¯æŒ Minecraft å¹³å°ã€‚

### services.live2d

åŸºäº [live2d-py](https://github.com/Arkueid/live2d-py)ã€[OpenGL](https://www.opengl.org/) å’Œ 
[PyQt5](https://pypi.org/project/PyQt5/) å¼€å‘çš„ Live2D è™šæ‹Ÿå½¢è±¡æ§åˆ¶å™¨ã€‚
å®ç°äº†çª—å£å®½é«˜æ§åˆ¶ã€é€æ˜èƒŒæ™¯ï¼ˆå¯ç”¨äº OBS ç›´æ’­æˆ–æ¡Œå® ï¼‰ï¼Œè§’è‰²è‡ªåŠ¨å‘¼å¸æ§åˆ¶ã€è‡ªåŠ¨çœ¨çœ¼æ§åˆ¶ï¼Œè¯´è¯æ—¶å˜´å‹æ§åˆ¶ã€‚

### services.live_stream

è¿æ¥åˆ°æŒ‡å®šç›´æ’­å¹³å°æœåŠ¡ï¼Œè·å–å¼¹å¹•ã€ç¤¼ç‰©æ¶ˆæ¯ç­‰ã€‚æ”¯æŒ Bilibiliã€YouTubeï¼ˆå®éªŒï¼‰ã€Twitchï¼ˆå®éªŒï¼‰ç›´æ’­é—´ã€‚

### services.obs

OBS ç›´æ’­æµå¼æ‰“å­—æœºå­—å¹•æ˜¾ç¤ºä¸æ§åˆ¶ï¼ŒåŸºäº [OBSWebSocket](https://github.com/obsproject/obs-websocket) å®ç°ã€‚

> [!NOTE]
> æ‚¨éœ€è¦å¼€å¯ OBS çš„ WebSocket æœåŠ¡å™¨ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š
> 1. æ‰“å¼€ OBSã€‚
> 2. æ‰¾åˆ°å·¥å…·æ ä¸­çš„â€œå·¥å…·â€é€‰é¡¹ï¼Œé€‰æ‹©â€œWebSocket æœåŠ¡å™¨è®¾ç½®â€ã€‚
> 3. ç‚¹å‡»â€œç”Ÿæˆå¯†ç â€è®¾ç½®æœåŠ¡å™¨å¯†ç ã€‚
> 4. ç‚¹å‡»â€œæ˜¾ç¤ºè¿æ¥ä¿¡æ¯â€ã€‚
> 5. å°†æœåŠ¡å™¨ IP ã€æœåŠ¡å™¨ç«¯å£å’ŒæœåŠ¡å™¨å¯†ç å¡«å†™å…¥é…ç½®æ–‡ä»¶ã€‚

### services.playground

Zerolan Playground Server æ˜¯ä¸€ä¸ªåŸºäº ZerolanProtocol çš„ WebSocket æœåŠ¡å™¨ï¼Œç”¨äºä¸ Unity å®ç°çš„ Zerolan Playground è¿›è¡Œè¿æ¥å’Œäº¤äº’ã€‚

### services.qqbot

æ­£åœ¨å¼€å‘ä¸­â€¦â€¦



## License

æœ¬é¡¹ç›®ä½¿ç”¨ MIT Licenseï¼Œè¯·å‹¿å°†æœ¬è½¯ä»¶ç”¨äºéæ³•ç”¨é€”ã€‚

Feel free to enjoy open-souce!

MIT License

Copyright (c) 2024 AkagawaTsurunaki

## Contact with Me

**Email**: AkagawaTsurunaki@outlook.com

**Github**: AkagawaTsurunaki

**Bilibili**: [èµ¤å·é¹¤é¸£_Channel](https://space.bilibili.com/1076299680)
